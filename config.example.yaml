data:
  tradingview_webhook_url: "https://your-server.com/tradingview"
  tradingview_symbol: "ES"
  tradingview_interval: "1m"
  ibkr_host: "127.0.0.1"
  ibkr_port: 7497
  ibkr_client_id: 1
  ibkr_symbol: "ES"
  ibkr_exchange: "GLOBEX"
  ibkr_currency: "USD"
  twitter_bearer_token: ""
  news_api_keys: []
  sentiment_refresh_interval: 60
trading:
  max_position_size: 4
  max_daily_loss: 2000.0
  max_daily_trades: 20
  initial_capital: 100000.0
  contract_multiplier: 50.0
  stop_loss_ticks: 10.0
  take_profit_ticks: 20.0
  tick_size: 0.25
  tick_value: 12.5
  commission_per_contract: 2.4
  
  # Position sizing method: "fixed_fraction" (recommended) or "kelly"
  position_sizing_method: "fixed_fraction"
  # Risk percentage per trade (0.005 = 0.5%, 0.01 = 1%)
  risk_per_trade_pct: 0.005
  
  # Safety parameters
  disaster_stop_pct: 0.007  # 0.7% emergency stop
  max_trade_duration_minutes: 60  # Exit if trade open > 60 minutes
  trade_cooldown_minutes: 5  # Wait 5 minutes after each trade
  
  # Indicator warm-up (INCREASED from 15 to 200)
  min_bars_for_signals: 200
  
  # Market regime filter thresholds
  min_atr_threshold: 0.5  # Minimum ATR for trading
  max_spread_ticks: 1  # Maximum bid/ask spread in ticks
  max_loop_latency_seconds: 3.0  # Max acceptable loop iteration time
  
  # Weighted voting threshold
  min_weighted_confidence: 0.70
backtest:
  data_path: "data/historical_spy_es.parquet"
  start_date: null
  end_date: null
  initial_capital: 100000.0
  slippage: 0.25
  risk_free_rate: 0.02
optimization:
  window_length: 5000
  retrain_interval: 3600  # Legacy - not used in real-time loop anymore
  parameter_grid:
    rsi_period: [14, 21, 28]
    macd_fast: [12, 16, 20]
    macd_slow: [26, 30, 35]
    sentiment_threshold: [0.4, 0.5, 0.6]
    momentum_lookback: [20, 30, 40]
  
  # Daily optimization (runs after market close)
  enable_daily_optimization: true
  optimized_params_path: "data/optimized_params.json"
  optimization_hour: 16  # 4 PM ET

# AWS Bedrock LLM Integration (Optional)
llm:
  # Enable/disable LLM enhancement
  enabled: false  # Set to true to enable LLM features
  
  # AWS Bedrock settings
  model_id: "anthropic.claude-3-sonnet-20240229-v1:0"  # or "anthropic.claude-3-haiku-20240307-v1:0" for faster/cheaper
  region_name: "us-east-1"
  max_tokens: 2048
  temperature: 0.3  # Lower = more deterministic (0.0-1.0)
  
  # Trade advisor settings
  min_confidence_threshold: 0.7  # Only execute trades if LLM confidence >= 0.7
  override_mode: false  # MUST be false - LLM is COMMENTARY ONLY, quant signals decide trades
  
  # AWS Comprehend sentiment analysis
  enable_sentiment: true
  sentiment_region: "us-east-1"
  
  # Training pipeline settings
  s3_bucket: "your-trading-data-bucket"  # S3 bucket for training data
  s3_prefix: "llm-training-data"
  retrain_interval_days: 7  # Retrain model every N days
  min_training_trades: 100  # Minimum trades required for retraining
  
  # Database settings
  trade_log_db_path: "data/llm_trades.db"  # SQLite database for trade logging
  
  # Call interval to prevent excessive API calls
  call_interval_seconds: 60  # Minimum seconds between LLM calls
  
  # Background worker settings (non-blocking LLM calls)
  use_background_thread: true  # Run LLM in background thread
  cache_timeout_seconds: 300  # Cache LLM output for 5 minutes

# Retrieval-Augmented Generation (RAG) Configuration
rag:
  # Enable/disable RAG functionality
  enabled: false  # Set to true to enable RAG knowledge base
  backend: "local_faiss"  # or off|opensearch_serverless|aurora_pgvector
  opensearch_enabled: false  # OpenSearch kill switch

  # AWS Bedrock embedding settings
  embedding_model_id: "amazon.titan-embed-text-v1"  # Titan Embeddings model
  region_name: "us-east-1"
  
  # Vector store settings
  vector_store_path: "data/rag_index"  # Path to persist FAISS index
  embedding_dimension: 1536  # Titan v1 embedding dimension
  
  # Retrieval settings
  top_k_results: 3  # Number of documents to retrieve
  score_threshold: 0.5  # Minimum similarity score (0-1)
  
  # Cache settings for query optimization
  cache_enabled: true
  cache_ttl_seconds: 3600  # Cache time-to-live in seconds
  
  # Batch processing
  batch_size: 10  # Number of documents to embed at once

  # Knowledge base
  knowledge_base_path: "data/knowledge_base"  # Directory containing trading knowledge documents
  local_store_path: "rag_data/local_kb/local_kb.sqlite"
  kb_cache_ttl_seconds: 120

# Telegram Notifications Configuration
telegram:
  # Enable/disable Telegram notifications
  enabled: false  # Set to true to enable Telegram alerts
  
  # Bot credentials (obtain from @BotFather on Telegram)
  bot_token: "your-bot-token-here"  # Your Telegram Bot API token
  chat_id: "your-chat-id-here"  # Your Telegram chat/channel ID
  
  # Notification preferences
  notify_on_trade: true  # Send alert when trade is executed
  notify_on_signal: false  # Send alert when signal is generated (can be noisy)
  notify_on_error: true  # Send alert on trading errors/warnings
