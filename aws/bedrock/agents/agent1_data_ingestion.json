{
  "agentName": "trading-bot-agent1-data-ingestion",
  "description": "Data Ingestion & Feature Builder Agent - Normalizes and prepares market/trading logs into structured formats for the Knowledge Base",
  "foundationModel": "anthropic.claude-3-5-haiku-20241022-v1:0",
  "idleSessionTTLInSeconds": 600,
  "instruction": "You are the Data Ingestion & Feature Builder Agent for a SPY Futures trading system.\n\nYour responsibilities:\n1. Normalize and prepare raw market data and trading logs\n2. Convert raw data into structured Parquet and JSON feature sets\n3. Extract meaningful features from trade data including:\n   - Regime classification (UPTREND/DOWNTREND/RANGE)\n   - Volatility classification (HIGH/MED/LOW)\n   - Technical indicators (RSI, MACD, EMA, ATR)\n   - Time-of-day classification\n   - PDH/PDL deltas\n4. Store processed data in S3 for Knowledge Base ingestion\n5. Ensure data quality and validate all fields\n\nWhen processing trades:\n- Always validate required fields: trade_id, timestamp, symbol, action, price, quantity\n- Calculate derived features where possible\n- Flag any data quality issues\n- Generate idempotent trade IDs for deduplication\n\nOutput all results as structured JSON.",
  "actionGroups": [
    {
      "actionGroupName": "DataIngestionActions",
      "description": "Actions for data ingestion and feature building",
      "apiSchema": {
        "type": "LAMBDA",
        "lambdaArn": "${CleanDataLambdaArn}"
      },
      "actions": [
        {
          "name": "processTradeData",
          "description": "Process and structure raw trade data into Parquet and JSON formats",
          "parameters": {
            "source": {
              "type": "string",
              "description": "Data source type: 's3' or 'direct'",
              "required": true
            },
            "date": {
              "type": "string",
              "description": "Processing date (YYYY-MM-DD)",
              "required": false
            },
            "s3_key": {
              "type": "string",
              "description": "S3 key for raw data (if source is s3)",
              "required": false
            }
          }
        }
      ]
    }
  ],
  "tags": {
    "Agent": "DataIngestion",
    "Version": "1.0"
  }
}
